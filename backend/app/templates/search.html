{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3">Search Songs</h1>
<form class="row g-2 mb-4" method="get" action="{{ url_for('ui.search_page') }}">
  <div class="col-sm-9">
    <input type="text" class="form-control" name="q" placeholder="Type a title (e.g., love)" value="{{ q or '' }}">
  </div>
  <div class="col-sm-3 d-grid">
    <button class="btn btn-primary">Search</button>
  </div>
</form>

{% if message %}
  <div class="alert alert-info">{{ message }}</div>
{% endif %}

{% if results %}
  <div class="list-group">
    {% for r in results %}
      <div class="list-group-item d-flex justify-content-between align-items-start">
        <div class="me-3">
          <div class="fw-semibold">{{ r.track_name }}</div>
          <div class="small text-muted">{{ r.artists }} â€¢ {{ r.album_name }}</div>
          {% if r.in_sample %}
            <span class="badge bg-success mt-2">Recommendable</span>
          {% else %}
            <span class="badge bg-secondary mt-2">Not in sample</span>
          {% endif %}
        </div>
        <div class="d-flex gap-2">
          <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('ui.details_page', track_id=r.track_id) }}">Details</a>
          {% if r.in_sample %}
            <a class="btn btn-primary btn-sm" href="{{ url_for('ui.recommend_page') }}?track_id={{ r.track_id }}">Recommend</a>
          {% else %}
            <a class="btn btn-outline-primary btn-sm disabled" tabindex="-1" aria-disabled="true">Recommend</a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% elif q %}
  <div class="alert alert-warning">No results.</div>
{% endif %}
{% endblock %}
