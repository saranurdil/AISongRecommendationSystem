{% extends "base.html" %}
{% block content %}

{% if data.error %}
  <div class="alert alert-danger mt-3">{{ data.error }}</div>
{% else %}
  <div class="mt-3 mb-4 text-center">
    <div class="song-title">Recommendations</div>
    <div class="song-artist">Based on: <strong>{{ data.input }}</strong></div>
  </div>

  {% if data.recommendations %}
    {% for rec in data.recommendations %}
      <div class="neon-card">
        <div class="flex space-between">
          <div class="col">
            <div class="song-title">{{ rec.track_name }}</div>
            <div class="song-artist">{{ rec.artists }}</div>
            <div class="small" style="color:#c58ad9;">{{ rec.track_genre }}</div>
            {% if rec.track_search %}
              <div class="small" style="color:#a77ed6;">Key: {{ rec.track_search }}</div>
            {% endif %}
          </div>
          <div class="col" style="align-items:flex-end;">
            {% if rec.track_id %}
              <a class="btn-neon" href="{{ url_for('ui.details_page', track_id=rec.track_id) }}">Details</a>
            {% else %}
              <button class="btn-neon" disabled title="No ID found">Details</button>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-warning mt-4">No recommendations returned.</div>
  {% endif %}
{% endif %}

<div class="mt-4 text-center">
  <a class="btn-neon" href="{{ url_for('ui.search_page') }}">Back to Search</a>
</div>

{% endblock %}
